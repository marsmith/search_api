<!DOCTYPE html>
<!--
..........................................................
USGS Search API Sample:
Basic Usage
..........................................................
U.S. Geological Survey, Texas Water Science Center, Austin
https://txpub.usgs.gov/DSS/search_api/
..........................................................
-->
<html>
    <head>
        <meta http-equiv="Content-Type"    content="text/html; charset=utf-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
        <meta name="viewport"              content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
        <title>USGS Search API Sample</title>
        
        <!-- leaflet web map api -->
        <link    rel="stylesheet"     href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css"/>
        <script type="text/javascript" src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>
        
        <!-- search_api requires jquery -->
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        
        <!-- search_api 2.0 -->
        <link    rel="stylesheet"     href="./dist/search_api.css"/>
        <script type="text/javascript" src="./dist/search_api.js"></script>
        
        <!-- page styling -->
        <style>
            .container {
                position  : relative;
                width     : 90%;
                max-width : 1000px;
                height    : 500px;
            }
            .map {
                width   : 100%;
                height  : 100%;
                border  : 1px solid black;
                z-index : 1;
            }
            .search {
                position : absolute;
                top      : 10px;
                right    : 10px;
                z-index  : 2;
            }
        </style>
    </head>
    <body>
        
        <!--
        .................................
        leaflet example
        .................................
        -->
        <h1>Basic Usage: Leaflet Web Map</h1>
        <div class="container">
            <div id="map1"    class="map"   ></div>
            <div id="search1" class="search"></div>
        </div>
        <script>
            // create map in element "map1"
            var map1 = new L.Map( "map1", {
                center  : new L.LatLng(38,-99),
                minZoom : 3,
                maxZoom : 15,
                zoom    : 3,
                layers  : L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png")
            });

            // create search_api widget in element "search1"
            search_api.create( "search1", {
                on_result: function(o) {
                    // what to do when a location is found
                    // o.result is geojson point feature of location with properties
                    map1
                        .fitBounds([ // zoom to location
                            [ o.result.properties.LatMin, o.result.properties.LonMin ],
                            [ o.result.properties.LatMax, o.result.properties.LonMax ]
                        ])
                        .openPopup(  // open popup at location listing all properties
                            $.map( Object.keys(o.result.properties), function(property) {
                                return "<b>" + property + ": </b>" + o.result.properties[property];
                            }).join("<br/>"),
                            [ o.result.properties.Lat, o.result.properties.Lon ]
                        );
                }
            });
        </script>       
    </body>
</html>
<!-- end sample -->